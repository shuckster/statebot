/*
 * Statebot
 * v2.7.1
 * https://shuckster.github.io/statebot/
 * License: MIT
 */
var statebot=(function(n){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function e(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function o(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(t){r(n,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}function a(n,t){return(function(n){if(Array.isArray(n))return n})(n)||(function(n,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var r=[],e=!0,o=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(e=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,a=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw a}}return r})(n,t)||c(n,t)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function i(n){return(function(n){if(Array.isArray(n))return u(n)})(n)||(function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)})(n)||c(n)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function c(n,t){if(n){if("string"==typeof n)return u(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(n,t):void 0}}function u(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function f(n){return{all:n=n||new Map,on:function(t,r){var e=n.get(t);e&&e.push(r)||n.set(t,[r])},off:function(t,r){var e=n.get(t);e&&e.splice(e.indexOf(r)>>>0,1)},emit:function(t,r){(n.get(t)||[]).slice().map((function(n){n(r)})),(n.get("*")||[]).slice().map((function(n){n(t,r)}))}}}function s(n){return Array.isArray(n)}function l(n){return"function"==typeof n}function p(n){return"string"==typeof n}function v(n){return"object"===t(n)}function d(n){return!(null===n||!v(n))&&Object.getPrototypeOf(n)===Object.prototype}function y(n){return!!p(n)||!!s(n)&&n.every(p)}var h=function(n,r,e){var o=n[e],a=o.argName,i=o.argType;if(void 0===r)return'Argument undefined: "'.concat(a,'"');var c=Array.isArray(i)?i:[i],u=c.map((function(n){return l(n)?(function(n,t,r){return t(r)?void 0:"".concat(t.name,"(").concat(n,") did not return true")})(a,n,r):(function(n,r,e){return t(e)===r?void 0:'Argument "'.concat(n,'" should be a ').concat(r)})(a,n,r)})).filter(p);return(c.length>1?u.length>1:u.length)?"".concat(u.join("\n| "),"\n> typeof ").concat(a," === ").concat(t(r),"(").concat(JSON.stringify(r),")"):void 0};function m(n){return function(t,r){for(var e=Object.entries(r).map((function(n){var t=a(n,2);return{argName:t[0],argType:t[1]}})),o=arguments.length,i=new Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];var u=i.map((function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return h.apply(void 0,[e].concat(t))})).filter(p);if(u.length){var f=Object.keys(r).join(", ");return"\n".concat(n||"").concat(t,"(").concat(f,"):\n")+"".concat(u.map((function(n){return"| ".concat(n)})).join("\n"))}}}function g(n){var t=n.addListener?function(){return n.addListener.apply(n,arguments)}:function(){return n.on.apply(n,arguments)},r=n.removeListener?function(){return n.removeListener.apply(n,arguments)}:function(){return n.off.apply(n,arguments)},e=new Map;return{emit:function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return n.emit(t,e)},on:function(n,r){var o=e.get(r);o||(o={handleEvent:function(n){return r.apply(void 0,i(n||[]))},refCount:0},e.set(r,o)),o.refCount+=1,t(n,o.handleEvent)},off:function(n,t){var o=e.get(t);o&&(r(n,o.handleEvent),o.refCount-=1,0===o.refCount&&e.delete(t))}}}function w(n){return n.reduce((function(n,t){return-1===n.indexOf(t)?[].concat(i(n),[t]):n}),[])}function b(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];var o=setTimeout.apply(void 0,[n,0].concat(r));return function(){clearTimeout(o)}}function E(n){var t,r=!1;return{fn:function(){return r||(t=n.apply(void 0,arguments)),t},revoke:function(){r=!0}}}function S(n,t,e){for(var i=arguments.length,c=new Array(i>3?i-3:0),u=3;u<i;u++)c[u-3]=arguments[u];var f=[].concat(c).flat().reduce((function(n,t){return o(o({},n),{},r({},t,0))}),{});function s(n){return f[n]=p(n)+1,function(){l(n)}}function l(n){var t=p(n)-1;f[n]=Math.max(t,0)}function p(n){return f[n]||0}function v(){return o({},f)}function d(){return Object.keys(f).sort().map((function(n){return[n,f[n]]})).map((function(n){var e,o=a(n,2),i=o[0],c=o[1];return r(e={},t,i),r(e,"refs",c||"None"),e}))}function y(){return{description:"Statebot[".concat(n,"]: ").concat(e,":"),table:d()}}return{increase:s,decrease:l,countOf:p,toValue:y,refs:v}}function A(n,t){function r(){return n>=1}function e(){return n>=2}function o(){return n>=3}p(n)&&(n={info:3,log:2,warn:1,none:0}[n]||3);var a=t||console,i=a.info,c=a.table,u=a.log,f=a.warn,s=a.error;return{canWarn:r,canLog:e,canInfo:o,info:function(){o()&&i.apply(void 0,arguments)},table:function(){e()&&c.apply(void 0,arguments)},log:function(){e()&&u.apply(void 0,arguments)},warn:function(){r()&&f.apply(void 0,arguments)},error:function(){s.apply(void 0,arguments)}}}var T,O=/[\r\n]/,j="|",I="->",P=[j,I].map((function(n){return n.replace("|","\\|")})).join("|"),x=new RegExp("(".concat(P,")$")),L=/[^a-z0-9!@#$%^&*:_+=<>|~.\x2D]/gi,N=/(\/\/[^\n\r]*)/,C=m("statebot.");function D(n){var t=C("decomposeRoute",{templateLiteral:y},n);if(t)throw TypeError(t);return M(_(n)).flat(2)}function k(n){var t=C("decomposeChart",{chart:y},n);if(t)throw TypeError(t);var r=M(_(n)),e=r.map(R).flat(1).map(F).flat(1),o=!1,a=w(e.map((function(n){return n.includes("")&&(o=!0),n.join(I)}))),i=w(r.flat(3));return{transitions:a.map((function(n){return n.split(I)})),routes:a,states:o?i:i.filter(Boolean)}}function _(n){var t=(function(n){return[n].flat().reduce((function(n,t){return[].concat(i(n),[t.split(O)])}),[]).flat()})(n),r=[],e=!1,o=t.reduce((function(n,t){var o=t.replace(N,"").replace(L,"");return o?(e=x.test(o))?n+o:(r.push(n+o),""):n}),"");return e||o?[].concat(r,[o]):[].concat(r)}function M(n){return n.map((function(n){return n.split(I).map((function(n){return n.split(j)}))}))}function R(n){var t=[];return n.reduce((function(n,r){return!1===n||t.push([n,i(r)]),i(r)}),!1),t}function F(n){var t=a(n,2),r=t[0],e=t[1];return r.reduce((function(n,t){return[].concat(i(n),i(e.map((function(n){return[t,n]}))))}),[])}var U="onExiting",Y="onEntering",$="onExited",B="onEntered",G="onSwitching",H="onSwitched",V=(r(T={},G,"(ANY)state:changing"),r(T,H,"(ANY)state:changed"),T);function W(n,t){var r=[],e=[];return{configs:n.reduce((function(n,o){var c=o.routeChart,u=o.action,f=k(c),s=f.states,l=f.routes,p=f.transitions;return t()&&(r.push.apply(r,i(s)),e.push.apply(e,i(l))),[].concat(i(n),i(p.map((function(n){var t=a(n,2);return{fromState:t[0],toState:t[1],action:u}}))))}),[]),states:r,routes:e}}function z(n){return d(n)&&"number"==typeof n.__STATEBOT__}var J=m("statebot.");var K=0;function q(){var n=Date.now();function t(n,t){return n.toFixed(t).replace(/\.0+$/,"")}return function(){var r=Date.now()-n;return r<500?"".concat(t(r)," ms"):r<5e3?"".concat(t(r/1e3,2)," s "):r<6e4?"".concat(t(r/1e3,1)," s "):"".concat(t(r/1e3/60,1)," m ")}}return n.Statebot=function(n,t){if(!p(n))throw new TypeError("\nStatebot: Please specify a name for this machine");var e="Statebot[".concat(n,"]");if(!d(t))throw new TypeError("\n".concat(e,": Please specify options for this machine"));var c,u=t||{},y=u.chart,h=void 0===y?void 0:y,w=u.logLevel,b=void 0===w?3:w,E=u.historyLimit,T=void 0===E?2:E,O=void 0===t.events?g(f()):v(c=t.events)&&l(c.emit)&&(l(c.addListener)||l(c.on))&&(l(c.removeListener)||l(c.off))&&g(t.events);if(!O)throw new TypeError("\n".concat(e,": Invalid event-emitter specified in options"));var j=h?k(h):t,P=j.states,x=void 0===P?[]:P,L=j.routes,N=void 0===L?[]:L,C=t.startIn,D=void 0===C?x[0]:C;if(!x.includes(D))throw new Error("".concat(e,': Starting-state not in chart: "').concat(D,'"'));var _=m("".concat(e,"#")),M=A(b,console),R=M.canWarn,F=[D],z=Math.max(T,2),J=0,K=(function(n,t){t=t||function(){};var r=!!n;return{Pausable:function(n){return function(){return r?(t(),!1):n.apply(void 0,arguments)}},paused:function(){return r},pause:function(){r=!0},resume:function(){r=!1}}})(!1,(function(){return M.warn("".concat(e,": Ignoring callback, paused"))})),q=K.pause,Q=K.resume,X=K.paused,Z=K.Pausable,nn=g(f()),tn=Z(nn.emit);function rn(n,t){return nn.on(n,t),function(){return nn.off(n,t)}}var en=S(n,"states","Listening for the following state-changes",i(x)),on=S(n,"transitions","Listening for the following transitions",i(N)),an=S(n,"events","Listening for the following events");function cn(t,e){var c=l(t)?t({enter:yn,emit:dn,Enter:bn,Emit:wn}):d(t)?t:null;if(!d(c))throw new TypeError("Statebot[".concat(n,"]#").concat(e,"(): Expected an object, or a function that returns an object"));var u=[],f=[],v=(function(n){var t={},r=[];return Object.entries(n).map((function(n){var e=a(n,2),o=e[0],i=e[1];if(l(i))r.push({routeChart:o,action:i});else if(d(i)){var c=i.on,u=i.then;if(p(c)||s(c))[c].flat().map((function(n){t[n]=t[n]||[],t[n].push({routeChart:o,action:u})}));else l(u)&&r.push({routeChart:o,action:i})}})),{transitionsForEvents:t,transitionsOnly:r}})(c),y=v.transitionsForEvents,h=v.transitionsOnly,m=Object.entries(y).reduce((function(n,t){var e=a(t,2),c=e[0],s=W(e[1],R),l=s.states,p=s.routes,v=s.configs;R()&&(u.push.apply(u,i(l)),f.push.apply(f,i(p)));return o(o({},n),{},r({},c,v))}),{}),g=W(h,R),w=Object.entries(m).map((function(n){var t=a(n,2),r=t[0],e=t[1];return[an.increase(r),hn(r,(function(){for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];var i=e.map((function(n){return o(o({},n),{},{args:t})})).some(S);i||An('Event not handled: "'.concat(r,'"'))}))]})).concat(g.configs.map((function(n){var t=n.fromState,r=n.toState,e=n.action,o="".concat(t,"->").concat(r);return[on.increase(o),rn(o,e)]}))).flat();if(R()){u.push.apply(u,i(g.states)),f.push.apply(f,i(g.routes));var b=u.filter((function(n){return!x.includes(n)})),E=f.filter((function(n){return!N.includes(n)}));b.length&&M.warn("Statebot[".concat(n,"]#").concat(e,"(): Invalid states specified:\n")+b.map((function(n){return'  > "'.concat(n,'"')})).join("\n")),E.length&&M.warn("Statebot[".concat(n,"]#").concat(e,"(): Invalid transitions specified:\n")+E.map((function(n){return'  > "'.concat(n,'"')})).join("\n"))}return function(){return w.map((function(n){return n()}))};function S(n){var t=n.fromState,r=n.toState,e=n.action,o=n.args;return vn(t,(function(){return yn.apply(void 0,[r].concat(i(o))),l(e)&&e.apply(void 0,i(o)),!0}))}}function un(){return F[F.length-2]}function fn(){return F[F.length-1]}function sn(n){var t=void 0!==n?n:fn(),r=_("statesAvailableFromHere",{state:p},t);if(r)throw new TypeError(r);return N.reduce((function(n,r){var e=a(r.split(I).map((function(n){return n.trim()})),2),o=e[0],c=e[1];return o===t?[].concat(i(n),[c]):n}),[])}function ln(n,t){var r=fn()===n;if(void 0===t)return r;if(!r)return null;if(l(t)){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return t.apply(void 0,o)}return t}function pn(n){for(var t=Object.entries(n).find((function(n){return ln(a(n,1)[0])})),r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return t?ln.apply(void 0,i(t.concat(e))):null}function vn(){var n=_("inState",{state:[p,d]},arguments.length<=0?void 0:arguments[0]);if(n)throw new TypeError(n);return d(arguments.length<=0?void 0:arguments[0])?pn.apply(void 0,arguments):ln.apply(void 0,arguments)}var dn=Z((function(n){var t=_("emit",{eventName:p},n);if(t)throw new TypeError(t);for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return O.emit.apply(O,[n].concat(e))})),yn=Z((function(n){var t=_("enter",{state:p},n);if(t)throw new TypeError(t);var r=fn(),o=n;if(o===r)return An('Already in state: "'.concat(o,'"')),!1;if(!x.includes(o))return An('Invalid state "'.concat(o,'", not switching')),!1;var a="".concat(r,"->").concat(o);if(!N.includes(a))return An('Invalid transition "'.concat(a,'", not switching')),!1;M.info("".concat(e,": tId<").concat(++J,">: ").concat(a)),F.push(o),F.length>z&&F.shift();for(var i=arguments.length,c=new Array(i>1?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];return tn.apply(void 0,[V[G],o,r].concat(c)),tn.apply(void 0,[a].concat(c)),tn.apply(void 0,[V[H],o,r].concat(c)),!0}));function hn(n,t){var r=_("onEvent",{eventName:p,cb:l},n,t);if(r)throw new TypeError(r);return O.on(n,t),function(){return O.off(n,t)}}var mn=Object.keys(V).reduce((function(n,t){return o(o({},n),{},r({},t,(function(n){var r=_(t,{cb:l},n);if(r)throw new TypeError(r);var e=en.increase(V[t]),o=rn(V[t],n);return function(){o(),e()}})))}),{}),gn=[[U,G],[Y,G],[$,H],[B,H]].reduce((function(n,t){var e=a(t,2),i=e[0],c=e[1],u=i.slice(2),f=u.toLowerCase();return o(o({},n),{},r({},i,(function(n,t){var r=_(i,{state:p,cb:l},n,t);if(r)throw new TypeError(r);var e=[en.increase(n),en.increase("".concat(n,":").concat(f))],o=mn[c]((function(r,e){for(var o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];0===u.indexOf("Exit")?n===e&&t.apply(void 0,[r].concat(a)):n===r&&t.apply(void 0,[e].concat(a))}));return function(){o(),e.map((function(n){return n()}))}})))}),{});function wn(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];var o=_("Emit",{eventName:p},n);if(o)throw new TypeError(o);return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return dn.apply(void 0,[n].concat([].concat(r,e)))}}function bn(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];var o=_("Enter",{state:p},n);if(o)throw new TypeError(o);return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return yn.apply(void 0,[n].concat([].concat(r,e)))}}function En(n,t){for(var r=arguments.length,e=new Array(r>2?r-2:0),o=2;o<r;o++)e[o-2]=arguments[o];return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return vn.apply(void 0,[n,t].concat([].concat(e,o)))}}function Sn(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return vn.apply(void 0,[n].concat([].concat(r,e)))}}function An(n){var t=un(),r=fn(),o="".concat(void 0===t?"[undefined]":t,"->").concat(r),a=sn();a.length?M.info("".concat(e,": ").concat(n,"\n")+'  > Previous transition: "'.concat(o,'"\n')+'  > From "'.concat(r,'", valid states are: [').concat(a.map((function(n){return'"'.concat(n,'"')})).join(", "),"]")):M.info("".concat(e,": ").concat(n,"\n")+'  > Previous transition: "'.concat(o,'"\n')+'  > There are no states available from "'.concat(r,'"'))}function Tn(n){var t=n.toValue(),r=t.description,e=t.table;M.log(r),e.length?M.table(e):M.log("  > No information")}return{__STATEBOT__:1,canTransitionTo:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=t.flat(),o=_("canTransitionTo",{state:p},e[0]);if(o)throw new TypeError(o);if(!e.length)return!1;var a=sn();return e.every((function(n){return a.includes(n)}))},currentState:fn,emit:dn,Emit:wn,enter:yn,Enter:bn,history:function(){return[].concat(F)},info:function(){return M.log("".concat(e,": Information about this state-machine")),Tn(en),Tn(on),void Tn(an)},inspect:function(){return{states:en.refs(),transitions:on.refs(),events:an.refs()}},inState:vn,InState:function(){var n=_("InState",{state:[p,d]},arguments.length<=0?void 0:arguments[0]);if(n)throw new TypeError(n);return d(arguments.length<=0?void 0:arguments[0])?Sn.apply(void 0,arguments):En.apply(void 0,arguments)},name:function(){return n},onEntered:gn[B],onEntering:gn[Y],onEvent:hn,onExited:gn[$],onExiting:gn[U],onSwitched:mn[H],onSwitching:mn[G],onTransitions:function(n){return cn(n,"onTransitions")},pause:q,paused:X,performTransitions:function(n){return cn(n,"performTransitions")},previousState:un,reset:function(){M.warn("".concat(e,": State-machine reset!")),F.length=0,F.push(D)},resume:Q,statesAvailableFromHere:sn}},n.assertRoute=function(n,t,e){var a=J("assertRoute",{machine:z,expectedRoute:y},n,t);if(a)throw TypeError(a);K+=1;var c=e||{},u=c.description,f=void 0===u?"Assertion complete":u,s=c.fromState,l=void 0===s?"":s,p=c.run,v=void 0===p?function(){}:p,d=c.permittedDeviations,h=void 0===d?0:d,m=c.timeoutInMs,g=void 0===m?1e3:m,w=c.logLevel,S=A(void 0===w?3:w),T="Statebot[".concat(n.name(),"]: aId<").concat(K,">"),O=D(t);S.log("\n".concat(T,": Asserting route: [").concat(O.join(" > "),"]")),S.log("".concat(T,': > Assertion will start from state: "').concat(l,'"'));var j,I,P=(j=v,function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return b.apply(void 0,[j].concat(t))}),x=function(){},L=q(),N=q(),C=0,k=!0,_=!1,M=i(O),R=(function(n,t){t=t||[];var e=[],a=(n=n||[]).map((function(n,r){return t[r]||"center"})),c=!1;function u(){c=!0}function f(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];if(!c){var u=n.reduce((function(n,t,e){var i=a[e]||"";return o(o({},n),{},r({},t,i))}),{});e.push(u)}}function s(){return e.reduce((function(t,r){return n.map((function(n,e){return Math.max(r[n].length,t[e])}))}),n.map((function(){return 0})))}function l(){var t=s();function c(n,r){var e=t[r],o=a[r];return"left"===o?n.padEnd(e):"right"===o?n.padStart(e):n}return e.reduce((function(t,e){var a=n.reduce((function(n,t,a){return o(o({},n),{},r({},t,c(e[t],a)))}),{});return[].concat(i(t),[a])}),[])}return{lock:u,addRow:f,content:l}})(["state","expected","info","took"],["center","center","left","right"]),F=(function(n){var t,r=E(n),e=r.revoke,o=r.fn;return function(){return t=o.apply(void 0,arguments),e(),t}})((function(n){return U("","","","TOTAL: "+L()),R.lock(),S.log("\n".concat(T,": ").concat(f,": [").concat(n?"FAILED":"SUCCESS","]")),S.table(R.content()),n})),U=R.addRow;return new Promise((function(t,r){if(0!==M.length){var e=function(t){for(;M.length;){var e=M.shift();U(n.currentState(),"(".concat(e,")"),t),_=!1}!(function(n){clearTimeout(I),x(),c(),r(n)})(F(new Error(t)))};n.inState(l)&&(k=!1,x=P());var o=E((function(n){I=setTimeout((function(){a(),e("TIMEOUT")}),g),(function(n){if(k)U(n,"-","PENDING");else{var t=M[0];t===n?(U(n,t,_?"REALIGNED":"OKAY",N()),_=!1,M.shift()):(U(n,t,"WRONG STATE",N()),_=!0,C+=1),N=q()}})(n),k&&n===l&&(k=!1,x=P()),C>h&&(a(),e("TOO MANY DEVIATIONS")),M.length<=0&&(a(),(function(){clearTimeout(I),x(),c(),t.apply(void 0,arguments)})(F()))})),a=o.revoke,i=o.fn,c=n.onSwitching(i)}else r(F(new Error("NO ROUTE TO TEST")))}))},n.decomposeChart=k,n.isStatebot=z,n.routeIsPossible=function(n,t){var r=J("routeIsPossible",{machine:z,route:y},n,t);if(r)throw TypeError(r);var e=D(t);return e.every((function(t,r){if(r===e.length-1)return!0;var o=e[r+1];return n.statesAvailableFromHere(t).includes(o)}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({});
